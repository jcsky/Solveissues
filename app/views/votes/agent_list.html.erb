<div class="container">
  <div class="row">
    <div class="col-xs-12 sky-header"><h2>目前民代總人數: <%= @total_agents.size %></h2></div>
      <table class="table table-hover">
        <thead>
          <tr>
            <th>姓名</th>
            <th>站你的議題</th>
            <th>名聲 , like / dislike</th>
          </tr>
        </thead>
        <tbody>
          <% @agents.each do |agent| %>
            <tr>
              <!-- 列出user和這位民代agent的資訊 -->
              <td><%= link_to agent.name, user_path(agent) %></td>
              <td><%#= current_user ? agent.votes.select{ |i| @user_issues.map(&:id).include?(i.issue_id) }.size : 0 %>
              <%#= agent.find_votes_for.select{ |i| @user_issues.map(&:id).include?(i.votable_id) && i.votable_type == "Issue" }.size %>

              <%= ( agent.find_voted_items & @user_issues ).size %>

              </td>
              <td id = "agent-vote-<%= agent.id %>">
              <%= agent.get_likes.size - agent.get_dislikes.size %> ,
              <%= link_to icon("thumbs-up"), like_user_path(agent), :remote => true %>
              <%=
                case current_user.voted_as_when_voted_for agent
                when nil
                  "-"
                when true
                  "贊"
                else false
                  "噓"
                end
              %>
              <%= link_to icon_flipy("thumbs-down"), dislike_user_path(agent), :remote => true %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
  </div>
  <%= paginate @agents %>
</div>
